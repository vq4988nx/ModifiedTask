<html xmlns:th="http://www.thymeleaf.org">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<head>

    <!--Milligram stylesheet-->
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="//cdn.rawgit.com/milligram/milligram/master/dist/milligram.min.css">

    <!--Custom stylesheet-->
    <link rel="stylesheet" href="css/style.css" type="text/css">

    <title>Spending Events</title>

</head>
<body>

<h1>Spending Events Table</h1>

<h2>Total Amount Spent</h2>

<span id="value"></span>


<table id = "table">
    <tr>
        <th>.</th>
        <th>.</th>
        <th>ID</th>
        <th>DATE</th>
        <th>AMOUNT</th>
        <th>DESCRIPTION</th>
        <th>CATEGORY</th>
    </tr>
    <tr th:each="task : ${tasks}">
        <td><button class="modify-button" th:id="'modify-button-' + ${task.id}" >Modify Entry</button></td>
        <td><a th:id="'delete-'+${task.id}">Delete Entry</button></a></td>
        <td th:id="'task-id-'+${task.id}" th:text="${task.id}"></td>
        <td th:id="'task-date-'+${task.id}" th:text="${task.dayt}"></td>
        <td th:text="${task.amount}" class="rowDataSd"></td>
        <td th:id="'task-description-'+${task.id}" th:text="${task.description}"></td>
        <td th:text="${task.category}"></td>
    </tr>

</table>

<span id="val"></span>


<!--This js gets the total of the amount column.-->
<!--Used this tutorial as a guide to get the total-->
<!--https://1bestcsharp.blogspot.com/2017/08/javascript-table-column-values-sum.html-->
<script>

    var table = document.getElementById("table"), sumVal = 0;

    for(var i = 1; i < table.rows.length; i++)
    {
        // This is getting the total from the 5th column, amount [4]
        sumVal = sumVal + parseInt(table.rows[i].cells[4].innerHTML);
    }

    document.getElementById("val").innerHTML = "Sum Value = $" + sumVal;
    console.log(sumVal);

</script>

<!-- Modal form added here.  Used W3 schools tutorial for modal. -->
<div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>

        <form action="/updateTask" method="POST" th:action="@{/updateTask}">

            <p>Hello, testing</p>

            <input id="modal-edit-id" name="id" type="hidden" class="form-control"/>
            <input id="modal-edit-description" name="description" type="text" placeholder="description" class="form-control"/>
            <input id="modal-edit-date" name="dayt" type = "date" placeholder="date" />

            <button type="submit">Update</button>

        </form>

    </div>

</div>
</div>

</div>


</div>

</div>


<a href="/">Add a new task</a><br>
<a href="/categoriesTable">Go to Categories Table</a><br>


<script type="text/javascript" src="js/modals.js"></script>


</body>
</html>
